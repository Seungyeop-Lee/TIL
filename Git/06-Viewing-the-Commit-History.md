# 커밋 히스토리 조회하기

- 저장소의 커밋 히스토리를 조회하는 방법에 대해 정리한다.

## 히스토리 조회

- `git log`명령어를 사용하여 조회한다.
- 여러가지 옵션을 통해 조회 조건이나 표시 방법을 변경하는 것이 가능하다.

```bash
$ git log
```

- 옵션없이 실행 할 경우, 저장소의 커밋 히스토리를 시간순으로 보여준다.
  - 가장 최근 커밋이 가장 먼저 출력 됨
- 커밋의 체크섬, 저자 이름, 저자 이메일, 커밋한 날짜, 커밋 메시지가 표시된다.

### 커밋의 diff결과 조회

- `git log -p [-<commit count>]`명령어를 사용한다.
- `<commit count>`는 출력 할 커밋의 숫자를 의미한다. (ex. 1, 3, ...)

```bash
$ git log -p -2
```

### 커밋의 통계정보 조회

- `git log --stat [-<commit count>]`명령어를 사용한다.
- `<commit count>`는 출력 할 커밋의 숫자를 의미한다. (ex. 1, 3, ...)

```bash
$ git log --stat -3
```

### 표시 형식 변경

- `git log [--pretty=oneline|short|full|fuller|format:"<format w/option>"] [--graph]` 명령어를 사용한다.
- `--pretty`옵션을 사용 할 경우, 설정치에 따라 출력되는 정보가 달라진다.

```bash
$ git log --pretty=fuller
```

| pretty 옵션 | 설명                                                |
| ----------- | --------------------------------------------------- |
| oneline     | 한 커밋을 한줄로 보여준다. 체크섬, 커밋 메세지 표시 |
| short       | 체크섬, 저자(이름, 이메일), 커밋 메세지 표시        |
| full        | short에서 커미터(이름, 이메일) 추가                 |
| fuller      | full에서 자료 생성 시간 및 커밋 시간 추가           |
| format      | `<format w/option>`에 맞춰서 출력 (커스터마이징)    |

| `--format`안에서 사용가능 옵션 | 설명                |
| ------------------------------ | ------------------- |
| `%H`                           | 커밋 해시           |
| `%h`                           | 짧은 길이 커밋 해시 |
| `%T`                           | 트리 해시           |
| `%t`                           | 짧은 길이 트리 해시 |
| `%P`                           | 부모 해시           |
| `%p`                           | 짧은 길이 부모 해시 |
| `%an`                          | 저자 이름           |
| `%ae`                          | 저자 메일           |
| `%ad`                          | 저자 시각           |
| `%ar`                          | 저자 상대적 시작    |
| `%cn`                          | 커미터 이름         |
| `%ce`                          | 커미터 메일         |
| `%cd`                          | 커미터 시각         |
| `%cr`                          | 커미터 상대적 시각  |
| `%s`                           | 요약                |

- `--graph`옵션을 사용 할 경우, 브랜치와 머지 히스토리 정보까지 아스키 그래프로 보여준다.
  - `--pretty=oneline`, `--pretty=format="<format w/option>"`과 주로 같이 쓰인다.

```bash
$ git log --pretty=oneline --graph
```

### 조회 범위 제한

- 관련 옵션을 사용 할 경우, 조회 범위를 제한하여 원하는 정보를 가진 커밋만 조회가 가능하다.
- 특히 `-S`옵션의 경우 코드에서 추가되거나 삭제된 특정 텍스트가 포함되어 있는 커밋을 조회하여 준다.

```bash
$ git log -S Controller
```

| 제한 관련 옵션        | 설명                                                   |
| --------------------- | ------------------------------------------------------ |
| `-(n)`                | 최근 n개의 커밋만 조회                                 |
| `--since`, `--after`  | 명시한 날짜 이후 커밋만 조회                           |
| `--until`, `--before` | 명시한 날짜 이전 커밋만 조회                           |
| `--author`            | 입력한 저자의 커밋만 조회                              |
| `--committer`         | 입력한 커미터의 커밋만 조회                            |
| `--grep`              | 커밋 메세지에 입력한 텍스트가 포함 된 커밋만 조회      |
| `-S`                  | 변경된 파일 내용에 입력한 텍스트가 포함 된 커밋만 조회 |

```bash
$ git log --grep="rollback"
```

## 참조

- [Pro Git 2nd Edition > 2.3 Git의 기초 - 커밋 히스토리 조회하기](https://git-scm.com/book/ko/v2/Git%EC%9D%98-%EA%B8%B0%EC%B4%88-%EC%BB%A4%EB%B0%8B-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC-%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0)
